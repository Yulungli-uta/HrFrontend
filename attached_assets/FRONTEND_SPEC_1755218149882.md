# FRONTEND_SPEC.md

Este documento describe todos los servicios expuestos por la API `WsUtaSystem` en .NET 9,
incluyendo los campos enviados y recibidos, para consumo desde el Frontend o IA.

## Personas
### GET /api/personas
Retorna la lista de personas.
**Response fields:**
- PersonID (int)
- Identification (string)
- FirstName (string)
- LastName (string)
- BirthDate (date)
- GenderTypeID (int)
- MaritalStatusTypeID (int)
- CountryID (int)
- ProvinceID (int)
- CantonID (int)
- EthnicityTypeID (int)
- BloodTypeTypeID (int)
- DisabilityPercentage (decimal)
- CONADISCard (string)
- CreatedAt (datetime)

### POST /api/personas
Crea una nueva persona.
**Request fields:** Igual que los anteriores, excepto `PersonID` y `CreatedAt`.

---

## Cargas Familiares
### GET /api/familyburden/{personId}
Lista de cargas familiares de una persona.
**Response fields:**
- BurdenID (int)
- PersonID (int)
- DependentID (string)
- IdentificationTypeID (int)
- FirstName (string)
- LastName (string)
- BirthDate (date)
- DisabilityTypeID (int)
- CreatedAt (datetime)

---

## Experiencia Laboral
### GET /api/workexperiences/{personId}
**Response fields:**
- WorkExpID (int)
- PersonID (int)
- Company (string)
- Position (string)
- StartDate (date)
- EndDate (date)
- IsCurrent (bool)
- EntryReason (string)
- ExitReason (string)
- CountryID (int)
- InstitutionTypeID (int)
- ExperienceTypeID (int)
- CreatedAt (datetime)

---

## Capacitaciones
### GET /api/trainings/{personId}
**Response fields:**
- TrainingID (int)
- PersonID (int)
- Title (string)
- Institution (string)
- Location (string)
- StartDate (date)
- EndDate (date)
- Hours (int)
- CertificateTypeID (int)
- ApprovalTypeID (int)
- KnowledgeAreaTypeID (int)
- EventTypeID (int)
- CreatedAt (datetime)

---

## Publicaciones
### GET /api/publications/{personId}
**Response fields:**
- PublicationID (int)
- PersonID (int)
- Title (string)
- PublicationTypeID (int)
- JournalTypeID (int)
- JournalName (string)
- ISSN_ISBN (string)
- PublicationDate (date)
- KnowledgeAreaTypeID (int)
- SubAreaTypeID (int)
- AreaTypeID (int)
- UTAffiliation (bool)
- CreatedAt (datetime)

---

## Libros
### GET /api/books/{personId}
**Response fields:**
- BookID (int)
- PersonID (int)
- Title (string)
- ISBN (string)
- Publisher (string)
- CountryID (int)
- City (string)
- KnowledgeAreaTypeID (int)
- ParticipationTypeID (int)
- PublicationDate (date)
- UTAffiliation (bool)
- UTASponsorship (bool)
- CreatedAt (datetime)

---

## Contactos de Emergencia
### GET /api/emergencycontacts/{personId}
**Response fields:**
- ContactID (int)
- PersonID (int)
- Identification (string)
- FirstName (string)
- LastName (string)
- RelationshipTypeID (int)
- Phone (string)
- Mobile (string)
- Address (string)
- CreatedAt (datetime)

---

## Enfermedades Catastróficas
### GET /api/catastrophicillnesses/{personId}
**Response fields:**
- IllnessID (int)
- PersonID (int)
- Illness (string)
- IESSNumber (string)
- SubstituteName (string)
- IllnessTypeID (int)
- CertificateNumber (string)
- CreatedAt (datetime)

---

## Cuentas Bancarias
### GET /api/bankaccounts/{personId}
**Response fields:**
- AccountID (int)
- PersonID (int)
- FinancialInstitution (string)
- AccountTypeID (int)
- AccountNumber (string)
- CreatedAt (datetime)

---

## Catálogos (Tipos)
### GET /api/catalogs/{category}
Retorna todos los tipos de una categoría (ej: MARITAL_STATUS, BLOOD_TYPE, DISABILITY_TYPE).

**Response fields:**
- TypeID (int)
- Category (string)
- Name (string)
- Description (string)
- IsActive (bool)

---

## Geografía
### GET /api/countries
### GET /api/provinces/{countryId}
### GET /api/cantons/{provinceId}

Campos estándar:
- CountryID / ProvinceID / CantonID
- Name / Code
- CreatedAt


# FRONTEND_SPEC.md — WsUtaSystem (UTA) — API v1 (COMPLETO)

**Base URL (local):** `http://localhost:5000`  
**Swagger UI:** `/swagger/index.html`  
**OpenAPI (JSON):** `/openapi/v1.json`  
**Auth:** (no aplica por ahora; agregar JWT/OAuth más adelante)

---

## 0) Convenciones y Reglas Globales

**Formatos**
- `DateOnly`: `YYYY-MM-DD` (ej. `"2025-08-14"`)
- `TimeOnly`: `HH:mm:ss` (ej. `"08:00:00"`)
- `DateTime (ISO 8601, UTC)`: `YYYY-MM-DDTHH:mm:ssZ`
- Decimales con `.` (punto)

**HTTP**
- Éxito: `200 OK`, `201 Created`, `204 No Content`
- Errores: `400 Bad Request`, `404 Not Found`, `409 Conflict`
- `Content-Type`: `application/json`

**Validaciones UI sugeridas**
- `email` válido; `idCard` regex `/^[0-9A-Za-z-]{5,20}$/`
- `period` (nómina): `/^\d{4}-(0[1-9]|1[0-2])$/`
- Regla fechas: `endDate >= startDate` donde aplique
- Númericos > 0 en: `hours`, `quantity`, `unitValue`, `baseSalary`, `owedMinutes`
- Respetar longitudes máximas indicadas
- Manejo de `409` por claves únicas (p.ej., `(employeeId, period)`, `email`, `idCard`)

**Convención CRUD por recurso**
`GET /` • `GET /{id}` • `POST /` • `PUT /{id}` • `DELETE /{id}`

---

## 1) Catálogo de Tipos — `/api/ref/types`  (Tabla: `HR.ref_Types`)
**Modelo**
```ts
interface RefType {
  typeId: number;              // PK
  category: string;            // max 50 (ej.: 'MARITAL_STATUS','RELATIONSHIP', etc.)
  name: string;                // max 100
  description?: string;        // max 255
  isActive: boolean;           // default true
  createdAt: string;           // DateTime
}
Notas: UNIQUE (category, name).

2) Geografía
2.1 Países — /api/geo/countries (Tabla: HR.tbl_Countries)
ts
Copiar
Editar
interface Country {
  countryId: number;           // PK
  countryCode: string;         // max 5, UNIQUE
  countryName: string;         // max 100
  createdAt: string;           // DateTime
}
2.2 Provincias — /api/geo/provinces (Tabla: HR.tbl_Provinces)
ts
Copiar
Editar
interface Province {
  provinceId: number;          // PK
  countryId: number;           // FK -> Countries
  provinceCode: string;        // max 5, UNIQUE
  provinceName: string;        // max 100
  createdAt: string;           // DateTime
}
2.3 Cantones — /api/geo/cantons (Tabla: HR.tbl_Cantons)
ts
Copiar
Editar
interface Canton {
  cantonId: number;            // PK
  provinceId: number;          // FK -> Provinces
  cantonCode: string;          // max 5, UNIQUE
  cantonName: string;          // max 100
  createdAt: string;           // DateTime
}
3) Personas — /api/people (Tabla: HR.tbl_People)
ts
Copiar
Editar
type Sex = 'M'|'F'|'O';
interface Person {
  id: number;                  // PersonID (PK)
  firstName: string;           // max 100
  lastName: string;            // max 100
  idCard: string;              // max 20, UNIQUE
  email: string;               // max 150, UNIQUE
  phone?: string;              // max 30
  birthDate?: string;          // DateOnly
  sex?: Sex;                   // 1 char
  gender?: string;             // max 50
  disability?: string;         // max 200
  address?: string;            // max 255
  isActive: boolean;           // default true

  // Campos agregados por ALTER (opcionales)
  maritalStatusTypeId?: number;    // FK -> ref_Types
  militaryCard?: string;           // max 50
  motherName?: string;             // max 100
  fatherName?: string;             // max 100
  countryId?: number;              // FK -> Countries
  provinceId?: number;             // FK -> Provinces
  cantonId?: number;               // FK -> Cantons
  yearsOfResidence?: number;
  ethnicityTypeId?: number;        // FK -> ref_Types
  bloodTypeTypeId?: number;        // FK -> ref_Types
  specialNeedsTypeId?: number;     // FK -> ref_Types
  disabilityPercentage?: number;   // decimal(5,2)
  conadisCard?: string;            // max 50
}
4) Empleados — /api/employees (Tabla: HR.tbl_Employees)
ts
Copiar
Editar
type EmpType = 'Teacher_LOSE'|'Administrative_LOSEP'|'Employee_CT'|'Coordinator';
interface Employee {
  id: number;                   // EmployeeID (PK = PersonID)
  type: EmpType;                // max 40
  departmentId?: number;        // FK -> Departments
  immediateBossId?: number;     // FK -> Employees
  hireDate: string;             // DateOnly
  isActive: boolean;            // default true
}
5) Facultades — /api/faculties (Tabla: HR.tbl_Faculties)
ts
Copiar
Editar
interface Faculty {
  id: number;                   // PK
  name: string;                 // max 120
  deanEmployeeId?: number;      // FK -> Employees
  isActive: boolean;            // default true
}
6) Departamentos — /api/departments (Tabla: HR.tbl_Departments)
ts
Copiar
Editar
interface Department {
  id: number;                   // PK
  facultyId?: number;           // FK -> Faculties
  name: string;                 // max 120
  isActive: boolean;            // default true
}
Regla BD: UNIQUE (facultyId, name).

7) Horarios — /api/schedules (Tabla: HR.tbl_Schedules)
ts
Copiar
Editar
interface Schedule {
  id: number;                   // PK
  description: string;          // max 120
  entryTime: string;            // TimeOnly
  exitTime: string;             // TimeOnly
  workingDays: string;          // max 20 (ej. "1,2,3,4,5")
  requiredHoursPerDay: number;  // decimal(5,2)
  hasLunchBreak: boolean;       // default true
  lunchStart?: string;          // TimeOnly
  lunchEnd?: string;            // TimeOnly
  isRotating: boolean;          // default false
  rotationPattern?: string;     // max 120
}
8) Asignación de Horarios — /api/employee-schedules (Tabla: HR.tbl_EmployeeSchedules)
ts
Copiar
Editar
interface EmployeeSchedule {
  id: number;                   // EmpScheduleID (PK)
  employeeId: number;           // FK -> Employees
  scheduleId: number;           // FK -> Schedules
  validFrom: string;            // DateOnly
  validTo?: string;             // DateOnly (NULL = vigente)
}
9) Contratos — /api/contracts (Tabla: HR.tbl_Contracts)
ts
Copiar
Editar
interface Contract {
  id: number;                   // PK
  employeeId: number;           // FK -> Employees
  contractType: string;         // max 50
  startDate: string;            // DateOnly
  endDate?: string;             // DateOnly
  baseSalary: number;           // decimal(12,2)
}
10) Historial de salarios — /api/salary-history (Tabla: HR.tbl_SalaryHistory)
ts
Copiar
Editar
interface SalaryHistory {
  id: number;                   // PK
  contractId: number;           // FK -> Contracts
  oldSalary: number;            // decimal(12,2)
  newSalary: number;            // decimal(12,2)
  changedBy: string;            // sysname
  changedAt: string;            // DateTime
  reason?: string;              // max 300
}
11) Tipos de permiso — /api/permission-types (Tabla: HR.tbl_PermissionTypes)
ts
Copiar
Editar
interface PermissionType {
  id: number;                   // TypeID (PK)
  name: string;                 // max 80
  deductsFromVacation: boolean; // default false
  requiresApproval: boolean;    // default true
  maxDays?: number;
}
12) Permisos — /api/permissions (Tabla: HR.tbl_Permissions)
ts
Copiar
Editar
type PermissionStatus = 'Pending'|'Approved'|'Rejected';
interface Permission {
  id: number;                   // PermissionID (PK)
  employeeId: number;           // FK -> Employees
  permissionTypeId: number;     // FK -> PermissionTypes
  startDate: string;            // DateOnly
  endDate: string;              // DateOnly
  chargedToVacation: boolean;   // default false
  approvedBy?: number;          // FK -> Employees
  justification?: string;       // texto
  requestDate: string;          // DateTime
  status: PermissionStatus;     // max 20
  vacationId?: number;          // FK -> Vacations
}
13) Vacaciones — /api/vacations (Tabla: HR.tbl_Vacations)
ts
Copiar
Editar
type VacationStatus = 'Planned'|'InProgress'|'Completed'|'Canceled';
interface Vacation {
  id: number;                   // PK
  employeeId: number;           // FK -> Employees
  startDate: string;            // DateOnly
  endDate: string;              // DateOnly
  daysGranted: number;
  daysTaken: number;            // default 0
  status: VacationStatus;       // max 20
}
14) Asistencia
14.1 Picadas — /api/attendance/punches (Tabla: HR.tbl_AttendancePunches)
ts
Copiar
Editar
type PunchType = 'In'|'Out';
interface AttendancePunch {
  id: number;                   // PunchID (PK)
  employeeId: number;           // FK -> Employees
  punchTime: string;            // DateTime
  punchType: PunchType;         // max 10
  deviceId?: string;            // max 60
  longitude?: number;           // decimal(10,7)
  latitude?: number;            // decimal(10,7)
}
14.2 Justificación de picadas — /api/attendance/punch-justifications (Tabla: HR.tbl_PunchJustifications)
ts
Copiar
Editar
interface PunchJustification {
  id: number;                   // PunchJustID (PK)
  punchId: number;              // FK -> AttendancePunches
  bossEmployeeId: number;       // FK -> Employees
  reason: string;               // max 500
  approved: boolean;            // default false
  approvedAt?: string;          // DateTime
}
14.3 Agregados — /api/attendance/calculations (Tabla: HR.tbl_AttendanceCalculations)
ts
Copiar
Editar
type CalcStatus = 'Pending'|'Approved';
interface AttendanceCalculation {
  id: number;                   // CalculationID (PK)
  employeeId: number;           // FK -> Employees
  workDate: string;             // DateOnly
  firstPunchIn?: string;        // DateTime
  lastPunchOut?: string;        // DateTime
  totalWorkedMinutes: number;   // default 0
  regularMinutes: number;       // default 0
  overtimeMinutes: number;      // default 0
  nightMinutes: number;         // default 0
  holidayMinutes: number;       // default 0
  status: CalcStatus;           // max 12
}
15) Horas extra
15.1 Configuración — /api/overtime/config (Tabla: HR.tbl_OvertimeConfig)
ts
Copiar
Editar
interface OvertimeConfig {
  overtimeType: string;         // PK, max 50
  factor: number;               // decimal(5,2)
  description?: string;         // max 200
}
15.2 Registro — /api/overtime (Tabla: HR.tbl_Overtime)
ts
Copiar
Editar
type OTStatus = 'Planned'|'Verified'|'Rejected'|'Paid';
interface Overtime {
  id: number;                   // OvertimeID (PK)
  employeeId: number;           // FK -> Employees
  workDate: string;             // DateOnly
  overtimeType: string;         // FK -> OvertimeConfig
  hours: number;                // decimal(5,2) > 0
  status: OTStatus;             // max 20
  approvedBy?: number;          // FK -> Employees
  secondApprover?: number;      // FK -> Employees
  factor: number;               // decimal(5,2)
  actualHours: number;          // decimal(5,2)
  paymentAmount: number;        // decimal(12,2)
}
16) Recuperación de tiempo
16.1 Plan — /api/time-recovery/plans (Tabla: HR.tbl_TimeRecoveryPlans)
ts
Copiar
Editar
interface TimeRecoveryPlan {
  id: number;                   // RecoveryPlanID (PK)
  employeeId: number;           // FK -> Employees
  owedMinutes: number;          // >= 60
  planDate: string;             // DateOnly
  fromTime: string;             // TimeOnly
  toTime: string;               // TimeOnly
  reason?: string;              // max 300
  createdBy?: number;           // FK -> Employees
}
Check BD: bloque horario cubre owedMinutes y >= 60 min.

16.2 Log — /api/time-recovery/logs (Tabla: HR.tbl_TimeRecoveryLogs)
ts
Copiar
Editar
interface TimeRecoveryLog {
  id: number;                   // RecoveryLogID (PK)
  recoveryPlanId: number;       // FK -> TimeRecoveryPlans
  executedDate: string;         // DateOnly
  minutesRecovered: number;
  approvedBy?: number;          // FK -> Employees
  approvedAt?: string;          // DateTime
}
17) Subrogaciones — /api/subrogations (Tabla: HR.tbl_Subrogations)
ts
Copiar
Editar
interface Subrogation {
  id: number;                        // SubrogationID (PK)
  subrogatedEmployeeId: number;     // FK -> Employees
  subrogatingEmployeeId: number;    // FK -> Employees
  startDate: string;                 // DateOnly
  endDate: string;                   // DateOnly  (>= startDate)
  permissionId?: number;             // FK -> Permissions
  vacationId?: number;               // FK -> Vacations
  reason?: string;                   // max 300
}
18) Movimientos de personal — /api/personnel-movements (Tabla: HR.tbl_PersonnelMovements)
ts
Copiar
Editar
type MovementType = 'Transfer'|'Promotion'|'Demotion'|'Lateral';
interface PersonnelMovement {
  id: number;                        // MovementID (PK)
  employeeId: number;                // FK -> Employees
  contractId: number;                // FK -> Contracts
  originDepartmentId?: number;       // FK -> Departments
  destinationDepartmentId: number;   // FK -> Departments
  movementDate: string;              // DateOnly
  movementType: MovementType;        // max 30
  documentLocation?: string;         // max 255
  reason?: string;                   // max 500
  createdBy?: number;                // FK -> Employees
}
19) Nómina
19.1 Cabecera — /api/payroll (Tabla: HR.tbl_Payroll)
ts
Copiar
Editar
type PayrollStatus = 'Pending'|'Paid'|'Reconciled';
interface Payroll {
  id: number;                   // PayrollID (PK)
  employeeId: number;           // FK -> Employees
  period: string;               // "YYYY-MM" (UNIQUE junto a employeeId)
  baseSalary: number;           // decimal(12,2)
  status: PayrollStatus;        // max 15
  paymentDate?: string;         // DateOnly
  bankAccount?: string;         // max 50
}
19.2 Detalle — /api/payroll-lines (Tabla: HR.tbl_PayrollLines)
ts
Copiar
Editar
type LineType = 'Earning'|'Deduction'|'Subsidy'|'Overtime';
interface PayrollLine {
  id: number;                   // PayrollLineID (PK)
  payrollId: number;            // FK -> Payroll
  lineType: LineType;           // max 20
  concept: string;              // max 120
  quantity: number;             // decimal(10,2) >= 0, default 1
  unitValue: number;            // decimal(12,2) >= 0, default 0
  notes?: string;               // max 300
}
20) Auditoría — /api/audit (Tabla: HR.tbl_Audit)
ts
Copiar
Editar
interface Audit {
  id: number;                   // BIGINT (PK)
  tableName: string;
  action: string;
  recordID: string;
  userName: string;
  dateTime: string;             // DateTime
  details?: string;
}
21) Hoja de Vida (Historia de Vida)
Importante: Estas tablas referencian PersonID (no EmployeeID).

21.1 Direcciones — /api/cv/addresses (Tabla: HR.tbl_Addresses)
ts
Copiar
Editar
interface AddressCv {
  addressId: number;            // PK
  personId: number;             // FK -> People
  addressTypeId: number;        // FK -> ref_Types (p.ej., DOMICILIO, TRABAJO)
  countryId: number;            // FK -> Countries
  provinceId: number;           // FK -> Provinces
  cantonId: number;             // FK -> Cantons
  parish?: string;              // max 100
  neighborhood?: string;        // max 100
  mainStreet: string;           // max 100
  secondaryStreet?: string;     // max 100
  houseNumber?: string;         // max 20
  reference?: string;           // max 255
  createdAt: string;            // DateTime
}
21.2 Instituciones — /api/cv/institutions (Tabla: HR.tbl_Institutions)
ts
Copiar
Editar
interface Institution {
  institutionId: number;        // PK
  name: string;                 // max 200
  institutionTypeId: number;    // FK -> ref_Types
  countryId: number;            // FK -> Countries
  provinceId: number;           // FK -> Provinces
  cantonId: number;             // FK -> Cantons
  createdAt: string;            // DateTime
}
21.3 Niveles de estudio — /api/cv/education-levels (Tabla: HR.tbl_EducationLevels)
ts
Copiar
Editar
interface EducationLevel {
  educationId: number;          // PK
  personId: number;             // FK -> People
  educationLevelTypeId: number; // FK -> ref_Types
  institutionId: number;        // FK -> Institutions
  title: string;                // max 150
  specialty?: string;           // max 100
  startDate?: string;           // DateOnly
  endDate?: string;             // DateOnly
  grade?: string;               // max 50
  location?: string;            // max 100
  score?: number;               // decimal(5,2)
  createdAt: string;            // DateTime
}
21.4 Contactos de emergencia — /api/cv/emergency-contacts (Tabla: HR.tbl_EmergencyContacts)
ts
Copiar
Editar
interface EmergencyContact {
  contactId: number;            // PK
  personId: number;             // FK -> People
  identification: string;       // max 20
  firstName: string;            // max 100
  lastName: string;             // max 100
  relationshipTypeId: number;   // FK -> ref_Types (RELATIONSHIP)
  address?: string;             // max 255
  phone?: string;               // max 30
  mobile?: string;              // max 30
  createdAt: string;            // DateTime
}
21.5 Enfermedades catastróficas — /api/cv/catastrophic-illnesses (Tabla: HR.tbl_CatastrophicIllnesses)
ts
Copiar
Editar
interface CatastrophicIllness {
  illnessId: number;            // PK
  personId: number;             // FK -> People
  illness: string;              // max 150
  iessNumber?: string;          // max 50
  substituteName?: string;      // max 100
  illnessTypeId: number;        // FK -> ref_Types
  certificateNumber?: string;   // max 50
  createdAt: string;            // DateTime
}
21.6 Carga familiar — /api/cv/family-burden (Tabla: HR.tbl_FamilyBurden)
ts
Copiar
Editar
interface FamilyBurden {
  burdenId: number;             // PK
  personId: number;             // FK -> People
  dependentId: string;          // max 20
  identificationTypeId: number; // FK -> ref_Types
  firstName: string;            // max 100
  lastName: string;             // max 100
  birthDate: string;            // DateOnly
  disabilityTypeId?: number;    // FK -> ref_Types
  createdAt: string;            // DateTime
}
21.7 Capacitaciones — /api/cv/trainings (Tabla: HR.tbl_Trainings)
ts
Copiar
Editar
interface TrainingCv {
  trainingId: number;           // PK
  personId: number;             // FK -> People
  location?: string;            // max 100
  title: string;                // max 200
  institution: string;          // max 150
  knowledgeAreaTypeId?: number; // FK -> ref_Types
  eventTypeId?: number;         // FK -> ref_Types
  certifiedBy?: string;         // max 150
  certificateTypeId?: number;   // FK -> ref_Types
  startDate: string;            // DateOnly
  endDate: string;              // DateOnly (>= startDate)
  hours: number;                // INT > 0
  approvalTypeId?: number;      // FK -> ref_Types
  createdAt: string;            // DateTime
}
21.8 Experiencia laboral — /api/cv/work-experiences (Tabla: HR.tbl_WorkExperiences)
ts
Copiar
Editar
interface WorkExperienceCv {
  workExpId: number;            // PK
  personId: number;             // FK -> People
  countryId?: number;           // FK -> Countries
  company: string;              // max 150
  institutionTypeId?: number;   // FK -> ref_Types
  entryReason?: string;         // max 200
  exitReason?: string;          // max 200
  position: string;             // max 120
  institutionAddress?: string;  // max 255
  startDate: string;            // DateOnly
  endDate?: string;             // DateOnly (>= startDate)
  experienceTypeId?: number;    // FK -> ref_Types
  isCurrent: boolean;           // default false
  createdAt: string;            // DateTime
}
21.9 Cuentas bancarias — /api/cv/bank-accounts (Tabla: HR.tbl_BankAccounts)
ts
Copiar
Editar
interface BankAccount {
  accountId: number;            // PK
  personId: number;             // FK -> People
  financialInstitution: string; // max 150
  accountTypeId: number;        // FK -> ref_Types
  accountNumber: string;        // max 50
  createdAt: string;            // DateTime
}
21.10 Publicaciones — /api/cv/publications (Tabla: HR.tbl_Publications)
ts
Copiar
Editar
interface PublicationCv {
  publicationId: number;        // PK
  personId: number;             // FK -> People
  location?: string;            // max 100
  publicationTypeId?: number;   // FK -> ref_Types
  isIndexed?: boolean;
  journalTypeId?: number;       // FK -> ref_Types
  issn_Isbn?: string;           // max 20
  journalName?: string;         // max 200
  journalNumber?: string;       // max 50
  volume?: string;              // max 50
  pages?: string;               // max 20
  knowledgeAreaTypeId?: number; // FK -> ref_Types
  subAreaTypeId?: number;       // FK -> ref_Types
  areaTypeId?: number;          // FK -> ref_Types
  title: string;                // max 300
  organizedBy?: string;         // max 150
  eventName?: string;           // max 200
  eventEdition?: string;        // max 50
  publicationDate?: string;     // DateOnly
  utAffiliation?: boolean;
  createdAt: string;            // DateTime
}
21.11 Libros — /api/cv/books (Tabla: HR.tbl_Books)
ts
Copiar
Editar
interface Book {
  bookId: number;               // PK
  personId: number;             // FK -> People
  title: string;                // max 300
  peerReviewed?: boolean;
  isbn?: string;                // max 20
  publisher?: string;           // max 200
  countryId?: number;           // FK -> Countries
  city?: string;                // max 100
  knowledgeAreaTypeId?: number; // FK -> ref_Types
  subAreaTypeId?: number;       // FK -> ref_Types
  areaTypeId?: number;          // FK -> ref_Types
  volumeCount?: number;
  participationTypeId?: number; // FK -> ref_Types
  publicationDate?: string;     // DateOnly
  utAffiliation?: boolean;
  utASponsorship?: boolean;
  createdAt: string;            // DateTime
}
22) Ejemplos de consumo (rápidos)
Crear persona + dirección + educación

http
Copiar
Editar
POST /api/people
{ "firstName":"Ana","lastName":"Vega","idCard":"1720012345","email":"ana.vega@uta.edu.ec","isActive":true }

POST /api/cv/addresses
{ "personId":1,"addressTypeId":101,"countryId":1,"provinceId":1,"cantonId":1,"mainStreet":"Av. Los Chasquis","secondaryStreet":"y Ambato","houseNumber":"S/N" }

POST /api/cv/education-levels
{ "personId":1,"educationLevelTypeId":210,"institutionId":3,"title":"Ingeniería en Sistemas","startDate":"2018-10-01","endDate":"2023-07-20" }
Capacitación + Experiencia

http
Copiar
Editar
POST /api/cv/trainings
{ "personId":1,"title":"Gestión Pública","institution":"ESPE","startDate":"2024-05-01","endDate":"2024-05-03","hours":16 }

POST /api/cv/work-experiences
{ "personId":1,"company":"Empresa X","position":"Analista","startDate":"2019-01-01","endDate":"2022-12-31","isCurrent":false }
Permiso + Subrogación

http
Copiar
Editar
POST /api/permissions
{ "employeeId":7,"permissionTypeId":2,"startDate":"2025-09-01","endDate":"2025-09-01","chargedToVacation":false,"requestDate":"2025-08-14T09:20:00Z","status":"Pending" }

POST /api/subrogations
{ "subrogatedEmployeeId":7,"subrogatingEmployeeId":9,"startDate":"2025-09-01","endDate":"2025-09-01","permissionId":1,"reason":"Cobertura por permiso" }
Nómina + detalle

http
Copiar
Editar
POST /api/payroll
{ "employeeId":7,"period":"2025-08","baseSalary":1350.00,"status":"Pending" }

POST /api/payroll-lines
{ "payrollId":1,"lineType":"Overtime","concept":"Horas extra nocturnas","quantity":6,"unitValue":5.50 }
